<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Typing Test</title>
  <link rel="icon" type="image/x-icon" href="favicon.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Source+Code+Pro:wght@400;500&display=swap" rel="stylesheet" />
  <style>
    :root {
      color-scheme: light dark;
      --bg: #f7f8fb;
      --card: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --border: #e5e7eb;
      --accent: #2563eb;
      --accent-strong: #1d4ed8;
      --shadow: 0 18px 55px rgba(17, 24, 39, 0.08);
      --radius-lg: 16px;
      --radius: 10px;
      --success: #10b981;
      --error: #ef4444;
      --warning: #f59e0b;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0f172a;
        --card: #111827;
        --text: #e5e7eb;
        --muted: #9ca3af;
        --border: #1f2937;
        --accent: #60a5fa;
        --accent-strong: #3b82f6;
        --shadow: 0 22px 60px rgba(0, 0, 0, 0.55);
        --success: #10b981;
        --error: #ef4444;
        --warning: #f59e0b;
      }
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at 20% 20%, rgba(96, 165, 250, 0.12), transparent 32%),
                  radial-gradient(circle at 80% 0%, rgba(99, 102, 241, 0.10), transparent 36%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 3.5rem 1rem;
    }

    .card {
      width: min(900px, 100%);
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      padding: 2rem;
      display: grid;
      gap: 1.5rem;
    }

    header { 
      display: flex; 
      flex-direction: column; 
      gap: 0.35rem; 
      text-align: center;
    }

    h1 {
      margin: 0;
      font-size: 2rem;
      letter-spacing: -0.02em;
      font-weight: 700;
    }

    .subtitle { 
      margin: 0; 
      color: var(--muted); 
      font-weight: 500; 
      font-size: 0.9rem;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 1rem;
      padding: 1rem;
      background: color-mix(in srgb, var(--card) 90%, var(--bg));
      border: 1px solid var(--border);
      border-radius: var(--radius);
    }

    .stat {
      text-align: center;
    }

    .stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent);
      font-family: 'Source Code Pro', monospace;
    }

    .stat-label {
      font-size: 0.85rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .word-display {
      font-family: 'Source Code Pro', monospace;
      font-size: 1.5rem;
      line-height: 2;
      padding: 2rem;
      background: color-mix(in srgb, var(--card) 95%, var(--bg));
      border: 1px solid var(--border);
      border-radius: var(--radius);
      min-height: 150px;
      position: relative;
      overflow: hidden;
    }

    .word {
      display: inline-block;
      margin: 0 0.5rem;
      position: relative;
    }

    .word.correct {
      color: var(--success);
    }

    .word.incorrect {
      color: var(--error);
    }

    .word.current {
      background: color-mix(in srgb, var(--accent) 20%, transparent);
      border-radius: 4px;
      padding: 0 2px;
    }

    .letter {
      display: inline-block;
      position: relative;
    }

    .letter.correct {
      color: var(--success);
    }

    .letter.incorrect {
      color: var(--error);
      background: color-mix(in srgb, var(--error) 20%, transparent);
      border-radius: 2px;
    }

    .letter.current {
      background: var(--accent);
      color: white;
      border-radius: 2px;
      animation: blink 1s infinite;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0.3; }
    }

    .input-area {
      display: grid;
      gap: 1rem;
    }

    .typing-input {
      width: 100%;
      padding: 1rem;
      font-family: 'Source Code Pro', monospace;
      font-size: 1.2rem;
      border: 2px solid var(--border);
      border-radius: var(--radius);
      background: var(--card);
      color: var(--text);
      transition: border-color 150ms ease;
      outline: none;
    }

    .typing-input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 20%, transparent);
    }

    .typing-input:disabled {
      background: color-mix(in srgb, var(--card) 90%, var(--bg));
      cursor: not-allowed;
    }

    .controls {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    button {
      border: none;
      border-radius: var(--radius);
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 150ms ease;
      font-family: 'Inter', sans-serif;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-primary:hover {
      background: var(--accent-strong);
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.25);
    }

    .btn-secondary {
      background: var(--btn-secondary);
      color: white;
    }

    .btn-secondary:hover {
      background: #4b5563;
      transform: translateY(-1px);
    }

    .time-selector {
      display: flex;
      gap: 0.5rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .time-btn {
      padding: 0.5rem 1rem;
      background: var(--card);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 150ms ease;
    }

    .time-btn:hover {
      background: color-mix(in srgb, var(--accent) 10%, var(--card));
      border-color: var(--accent);
    }

    .time-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    .results {
      padding: 1.5rem;
      background: color-mix(in srgb, var(--success) 10%, transparent);
      border: 1px solid color-mix(in srgb, var(--success) 30%, var(--border));
      border-radius: var(--radius);
      text-align: center;
    }

    .results h2 {
      margin: 0 0 1rem 0;
      color: var(--success);
      font-size: 1.5rem;
    }

    .result-stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
    }

    .result-stat {
      padding: 1rem;
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }

    .result-stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
      font-family: 'Source Code Pro', monospace;
    }

    .result-stat-label {
      font-size: 0.85rem;
      color: var(--muted);
      margin-top: 0.25rem;
    }

    @media (max-width: 640px) {
      body { padding: 2.25rem 1rem; }
      .card { padding: 1.5rem; }
      .word-display { font-size: 1.2rem; padding: 1.5rem; }
      .stats { grid-template-columns: repeat(2, 1fr); }
      .controls { flex-direction: column; }
      button { width: 100%; justify-content: center; }
    }
  </style>
</head>
<body>
  <main class="card" role="main" aria-label="Typing Test">
    <header>
      <h1>Typing Test</h1>
      <p class="subtitle">Test your typing speed and accuracy</p>
    </header>

    <div class="stats" id="stats">
      <div class="stat">
        <div class="stat-value" id="wpm">0</div>
        <div class="stat-label">WPM</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="accuracy">100%</div>
        <div class="stat-label">Accuracy</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="time">60</div>
        <div class="stat-label">Time</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="chars">0</div>
        <div class="stat-label">Characters</div>
      </div>
    </div>

    <div class="word-display" id="wordDisplay"></div>

    <div class="input-area">
      <input 
        type="text" 
        id="typingInput" 
        class="typing-input" 
        placeholder="Click here and start typing..."
        disabled
        autocomplete="off"
        autocorrect="off"
        autocapitalize="off"
        spellcheck="false"
      />
    </div>

    <div class="controls">
      <div class="time-selector">
        <button class="time-btn" data-time="15">15s</button>
        <button class="time-btn" data-time="30">30s</button>
        <button class="time-btn active" data-time="60">60s</button>
        <button class="time-btn" data-time="120">120s</button>
      </div>
      <button id="startBtn" class="btn-primary">Start Test</button>
      <button id="resetBtn" class="btn-secondary">Reset</button>
    </div>

    <div id="results" class="results" style="display: none;">
      <h2>Test Complete!</h2>
      <div class="result-stats">
        <div class="result-stat">
          <div class="result-stat-value" id="finalWpm">0</div>
          <div class="result-stat-label">Words Per Minute</div>
        </div>
        <div class="result-stat">
          <div class="result-stat-value" id="finalAccuracy">0%</div>
          <div class="result-stat-label">Accuracy</div>
        </div>
        <div class="result-stat">
          <div class="result-stat-value" id="finalChars">0</div>
          <div class="result-stat-label">Total Characters</div>
        </div>
        <div class="result-stat">
          <div class="result-stat-value" id="finalErrors">0</div>
          <div class="result-stat-label">Errors</div>
        </div>
      </div>
    </div>
  </main>

  <script>
    const words = [
      'the', 'be', 'to', 'of', 'and', 'a', 'in', 'that', 'have', 'I',
      'it', 'for', 'not', 'on', 'with', 'he', 'as', 'you', 'do', 'at',
      'this', 'but', 'his', 'by', 'from', 'they', 'we', 'say', 'her', 'she',
      'or', 'an', 'will', 'my', 'one', 'all', 'would', 'there', 'their', 'what',
      'so', 'up', 'out', 'if', 'about', 'who', 'get', 'which', 'go', 'me',
      'when', 'make', 'can', 'like', 'time', 'no', 'just', 'him', 'know', 'take',
      'people', 'into', 'year', 'your', 'good', 'some', 'could', 'them', 'see', 'other',
      'than', 'then', 'now', 'look', 'only', 'come', 'its', 'over', 'think', 'also',
      'back', 'after', 'use', 'two', 'how', 'our', 'work', 'first', 'well', 'way',
      'even', 'new', 'want', 'because', 'any', 'these', 'give', 'day', 'most', 'us',
      'is', 'water', 'been', 'call', 'who', 'oil', 'sit', 'now', 'find', 'long',
      'down', 'day', 'did', 'get', 'has', 'him', 'his', 'how', 'man', 'new',
      'now', 'old', 'see', 'two', 'way', 'who', 'boy', 'did', 'its', 'let',
      'put', 'say', 'she', 'too', 'use', 'was', 'are', 'but', 'for', 'had',
      'has', 'her', 'him', 'how', 'man', 'new', 'not', 'now', 'old', 'see',
      'the', 'quick', 'brown', 'fox', 'jumps', 'over', 'lazy', 'dog', 'pack', 'my',
      'box', 'with', 'five', 'dozen', 'liquor', 'jugs', 'amazing', 'journey', 'discovery',
      'technology', 'innovation', 'creativity', 'imagination', 'inspiration', 'determination',
      'perseverance', 'achievement', 'success', 'progress', 'development', 'improvement',
      'excellence', 'quality', 'performance', 'efficiency', 'productivity', 'effectiveness'
    ];

    let currentWords = [];
    let currentWordIndex = 0;
    let currentLetterIndex = 0;
    let startTime = null;
    let timeLimit = 60;
    let timerInterval = null;
    let correctChars = 0;
    let totalChars = 0;
    let errors = 0;
    let isTestActive = false;

    const wordDisplay = document.getElementById('wordDisplay');
    const typingInput = document.getElementById('typingInput');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultsDiv = document.getElementById('results');
    const timeButtons = document.querySelectorAll('.time-btn');

    function generateWords(count = 50) {
      const shuffled = [...words].sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    function renderWords() {
      wordDisplay.innerHTML = '';
      currentWords.forEach((word, wordIndex) => {
        const wordSpan = document.createElement('span');
        wordSpan.className = 'word';
        wordSpan.dataset.wordIndex = wordIndex;
        
        word.split('').forEach((letter, letterIndex) => {
          const letterSpan = document.createElement('span');
          letterSpan.className = 'letter';
          letterSpan.textContent = letter;
          letterSpan.dataset.wordIndex = wordIndex;
          letterSpan.dataset.letterIndex = letterIndex;
          wordSpan.appendChild(letterSpan);
        });
        
        wordDisplay.appendChild(wordSpan);
      });
      
      updateCurrentPosition();
    }

    function updateCurrentPosition() {
      // Remove previous current classes
      document.querySelectorAll('.letter.current, .word.current').forEach(el => {
        el.classList.remove('current');
      });
      
      // Add current classes
      const currentLetter = document.querySelector(
        `.letter[data-word-index="${currentWordIndex}"][data-letter-index="${currentLetterIndex}"]`
      );
      const currentWord = document.querySelector(
        `.word[data-word-index="${currentWordIndex}"]`
      );
      
      if (currentLetter) currentLetter.classList.add('current');
      if (currentWord) currentWord.classList.add('current');
    }

    function updateStats() {
      if (!startTime) return;
      
      const currentTime = Date.now();
      const timeElapsed = (currentTime - startTime) / 1000;
      const timeRemaining = Math.max(0, timeLimit - timeElapsed);
      
      const minutes = timeElapsed / 60;
      const wpm = minutes > 0 ? Math.round(correctChars / 5 / minutes) : 0;
      const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
      
      document.getElementById('wpm').textContent = wpm;
      document.getElementById('accuracy').textContent = accuracy + '%';
      document.getElementById('time').textContent = Math.ceil(timeRemaining);
      document.getElementById('chars').textContent = totalChars;
    }

    function startTest() {
      currentWords = generateWords();
      currentWordIndex = 0;
      currentLetterIndex = 0;
      correctChars = 0;
      totalChars = 0;
      errors = 0;
      startTime = Date.now();
      isTestActive = true;
      
      typingInput.value = '';
      typingInput.disabled = false;
      typingInput.focus();
      startBtn.disabled = true;
      resultsDiv.style.display = 'none';
      
      renderWords();
      
      timerInterval = setInterval(() => {
        const timeElapsed = (Date.now() - startTime) / 1000;
        if (timeElapsed >= timeLimit) {
          endTest();
        } else {
          updateStats();
        }
      }, 100);
    }

    function endTest() {
      isTestActive = false;
      clearInterval(timerInterval);
      
      typingInput.disabled = true;
      startBtn.disabled = false;
      
      const timeElapsed = timeLimit / 60;
      const wpm = Math.round(correctChars / 5 / timeElapsed);
      const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
      
      document.getElementById('finalWpm').textContent = wpm;
      document.getElementById('finalAccuracy').textContent = accuracy + '%';
      document.getElementById('finalChars').textContent = totalChars;
      document.getElementById('finalErrors').textContent = errors;
      
      resultsDiv.style.display = 'block';
    }

    function resetTest() {
      isTestActive = false;
      clearInterval(timerInterval);
      
      currentWordIndex = 0;
      currentLetterIndex = 0;
      correctChars = 0;
      totalChars = 0;
      errors = 0;
      startTime = null;
      
      typingInput.value = '';
      typingInput.disabled = true;
      startBtn.disabled = false;
      resultsDiv.style.display = 'none';
      
      document.getElementById('wpm').textContent = '0';
      document.getElementById('accuracy').textContent = '100%';
      document.getElementById('time').textContent = timeLimit;
      document.getElementById('chars').textContent = '0';
      
      currentWords = generateWords();
      renderWords();
    }

    function handleInput() {
      if (!isTestActive) return;
      
      const input = typingInput.value;
      const currentWord = currentWords[currentWordIndex];
      
      if (!currentWord) return;
      
      // Clear previous styling
      const wordElement = document.querySelector(`.word[data-word-index="${currentWordIndex}"]`);
      const letters = wordElement.querySelectorAll('.letter');
      
      letters.forEach((letter, index) => {
        letter.classList.remove('correct', 'incorrect');
      });
      
      // Check each letter
      for (let i = 0; i < input.length && i < currentWord.length; i++) {
        const letterElement = letters[i];
        if (letterElement) {
          if (input[i] === currentWord[i]) {
            letterElement.classList.add('correct');
          } else {
            letterElement.classList.add('incorrect');
          }
        }
      }
      
      // Update stats
      totalChars = Math.max(totalChars, input.length);
      correctChars = 0;
      errors = 0;
      
      for (let i = 0; i < input.length && i < currentWord.length; i++) {
        if (input[i] === currentWord[i]) {
          correctChars++;
        } else {
          errors++;
        }
      }
      
      updateStats();
      
      // Check if word is complete
      if (input.endsWith(' ') || input === currentWord) {
        const cleanInput = input.trim();
        if (cleanInput === currentWord) {
          currentWordIndex++;
          currentLetterIndex = 0;
          typingInput.value = '';
          updateCurrentPosition();
        }
      }
    }

    // Event listeners
    startBtn.addEventListener('click', startTest);
    resetBtn.addEventListener('click', resetTest);
    typingInput.addEventListener('input', handleInput);

    timeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        timeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        timeLimit = parseInt(btn.dataset.time);
        document.getElementById('time').textContent = timeLimit;
        if (!isTestActive) {
          resetTest();
        }
      });
    });

    // Prevent space bar from scrolling
    typingInput.addEventListener('keydown', (e) => {
      if (e.key === ' ') {
        e.preventDefault();
        handleInput();
      }
    });

    // Initialize
    resetTest();
  </script>
</body>
</html>
